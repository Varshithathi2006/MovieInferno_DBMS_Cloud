(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[533],{356:function(e,t,r){Promise.resolve().then(r.bind(r,343))},343:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return g}});var s=r(7821),a=r(8078),i=r(8504),n=r(4542),o=r(5853),l=r(2363),c=r(5639),d=r(432),h=r(9044),u=r(3778),x=r(7746),m=r(725),p=r(4328),f=r(4507);function g(){let e=(0,i.useRouter)(),[t,r]=(0,a.useState)(null),[g,b]=(0,a.useState)("all"),[v,w]=(0,a.useState)("date_added"),{watchlistItems:j,isInWatchlist:y,addToWatchlist:N,removeFromWatchlist:k,loading:_,error:C}=(0,p.B)(null==t?void 0:t.id);(0,a.useEffect)(()=>{(async()=>{let{data:{session:t}}=await m.O.auth.getSession();if(!t){e.push("/login");return}r(t.user)})()},[e]);let Z=[...j.filter(e=>"all"===g||e.media_type===g)].sort((e,t)=>{switch(v){case"title":return e.title.localeCompare(t.title);case"rating":return t.vote_average-e.vote_average;default:return new Date(t.created_at).getTime()-new Date(e.created_at).getTime()}});return _?(0,s.jsx)("div",{className:"min-h-screen bg-black text-white p-8",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-red-500 mx-auto mb-4"}),(0,s.jsx)("p",{children:"Loading your watchlist..."})]})}):C?(0,s.jsx)("div",{className:"min-h-screen bg-black text-white p-8",children:(0,s.jsxs)("div",{className:"text-center border border-red-500 rounded-lg p-8 bg-gray-900 max-w-md mx-auto mt-20",children:[(0,s.jsxs)("div",{className:"text-red-400 text-xl mb-4",children:["⚠️ ",C]}),(0,s.jsx)("div",{className:"text-gray-400",children:"Please refresh the page to try again."})]})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(f.w,{}),(0,s.jsx)("div",{className:"min-h-screen bg-black text-white p-8",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,s.jsxs)("div",{className:"text-center mb-12",children:[(0,s.jsxs)("div",{className:"flex justify-center items-center gap-3 mb-4",children:[(0,s.jsx)(o.Z,{className:"w-12 h-12 text-red-400"}),(0,s.jsx)("h1",{className:"text-5xl font-bold text-red-400",children:"My Watchlist"})]}),(0,s.jsx)("p",{className:"text-xl text-white max-w-2xl mx-auto",children:"Keep track of movies and TV shows you want to watch"})]}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-8 gap-4",children:[(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)("button",{onClick:()=>b("all"),className:"px-4 py-2 rounded-lg transition-colors border ".concat("all"===g?"bg-red-600 text-white border-white":"bg-gray-900 text-white border-red-500 hover:bg-red-900 hover:border-white"),children:["All (",j.length,")"]}),(0,s.jsxs)("button",{onClick:()=>b("movie"),className:"px-4 py-2 rounded-lg transition-colors border flex items-center gap-2 ".concat("movie"===g?"bg-red-600 text-white border-white":"bg-gray-900 text-white border-red-500 hover:bg-red-900 hover:border-white"),children:[(0,s.jsx)(l.Z,{className:"w-4 h-4"}),"Movies (",j.filter(e=>"movie"===e.media_type).length,")"]}),(0,s.jsxs)("button",{onClick:()=>b("tv"),className:"px-4 py-2 rounded-lg transition-colors border flex items-center gap-2 ".concat("tv"===g?"bg-red-600 text-white border-white":"bg-gray-900 text-white border-red-500 hover:bg-red-900 hover:border-white"),children:[(0,s.jsx)(c.Z,{className:"w-4 h-4"}),"TV Shows (",j.filter(e=>"tv"===e.media_type).length,")"]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-white",children:"Sort by:"}),(0,s.jsxs)("select",{value:v,onChange:e=>w(e.target.value),className:"bg-gray-900 text-white px-3 py-2 rounded-lg border border-red-500 focus:border-white focus:outline-none",children:[(0,s.jsx)("option",{value:"date_added",children:"Date Added"}),(0,s.jsx)("option",{value:"title",children:"Title"}),(0,s.jsx)("option",{value:"rating",children:"Rating"})]})]})]}),0===Z.length?(0,s.jsxs)("div",{className:"text-center py-16 border border-red-500 rounded-lg bg-gray-900 p-8",children:[(0,s.jsx)(d.Z,{className:"w-16 h-16 text-red-400 mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-2xl font-semibold mb-2 text-red-400",children:"all"===g?"Your watchlist is empty":"No ".concat("movie"===g?"movies":"TV shows"," in your watchlist")}),(0,s.jsx)("p",{className:"text-white mb-6",children:"Start adding movies and TV shows you want to watch!"}),(0,s.jsxs)("div",{className:"flex gap-4 justify-center",children:[(0,s.jsxs)(n.default,{href:"/movies",className:"bg-red-600 hover:bg-red-700 px-6 py-3 rounded-lg transition-colors flex items-center gap-2 border border-white hover:border-red-300",children:[(0,s.jsx)(l.Z,{className:"w-4 h-4"}),"Browse Movies"]}),(0,s.jsxs)(n.default,{href:"/tv",className:"bg-red-600 hover:bg-red-700 px-6 py-3 rounded-lg transition-colors flex items-center gap-2 border border-white hover:border-red-300",children:[(0,s.jsx)(c.Z,{className:"w-4 h-4"}),"Browse TV Shows"]})]})]}):(0,s.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6",children:Z.map(e=>(0,s.jsxs)("div",{className:"bg-gray-900 border border-red-500 rounded-lg overflow-hidden hover:bg-gray-800 hover:border-white transition-all duration-300 group shadow-lg hover:shadow-red-500/20",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(n.default,{href:"/".concat(e.media_type,"/").concat(e.tmdb_id),children:(0,s.jsx)("img",{src:e.poster_path?"https://image.tmdb.org/t/p/w500".concat(e.poster_path):"/placeholder.jpg",alt:e.title,className:"w-full h-80 object-cover group-hover:scale-105 transition-transform duration-300"})}),(0,s.jsx)("button",{onClick:()=>k(e.tmdb_id,e.media_type),className:"absolute top-2 right-2 bg-red-600 hover:bg-red-700 p-2 rounded-full transition-colors opacity-0 group-hover:opacity-100 border border-white",title:"Remove from watchlist",children:(0,s.jsx)(h.Z,{className:"w-4 h-4"})}),(0,s.jsxs)("div",{className:"absolute top-2 left-2 bg-black/80 border border-red-500 px-2 py-1 rounded-lg flex items-center gap-1",children:["movie"===e.media_type?(0,s.jsx)(l.Z,{className:"w-3 h-3 text-red-400"}):(0,s.jsx)(c.Z,{className:"w-3 h-3 text-red-400"}),(0,s.jsx)("span",{className:"text-xs capitalize text-white",children:e.media_type})]})]}),(0,s.jsxs)("div",{className:"p-4 bg-black",children:[(0,s.jsx)(n.default,{href:"/".concat(e.media_type,"/").concat(e.tmdb_id),children:(0,s.jsx)("h3",{className:"font-semibold text-white mb-2 line-clamp-2 hover:text-red-400 transition-colors",children:e.title})}),(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm text-white mb-2",children:[e.release_date&&(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(u.Z,{className:"w-3 h-3 text-red-400"}),(0,s.jsx)("span",{children:new Date(e.release_date).getFullYear()})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(x.Z,{className:"w-3 h-3 text-red-400"}),(0,s.jsx)("span",{children:e.vote_average.toFixed(1)})]})]}),e.overview&&(0,s.jsx)("p",{className:"text-xs text-gray-300 line-clamp-3",children:e.overview}),(0,s.jsxs)("div",{className:"mt-3 text-xs text-red-300",children:["Added ",new Date(e.created_at).toLocaleDateString()]})]})]},e.id))})]})})]})}},4507:function(e,t,r){"use strict";r.d(t,{w:function(){return g}});var s=r(7821),a=r(8078),i=r(8504),n=r(4542),o=r(5853),l=r(9198),c=r(6556),d=r(2363),h=r(2942),u=r(3116),x=r(3392),m=r(7469),p=r(7002),f=r(725);function g(){let[e,t]=(0,a.useState)(!1),[r,g]=(0,a.useState)(""),[b,v]=(0,a.useState)(null),[w,j]=(0,a.useState)(!0),y=(0,i.useRouter)();(0,a.useEffect)(()=>{f.O.auth.getSession().then(e=>{var t;let{data:{session:r}}=e;v(null!==(t=null==r?void 0:r.user)&&void 0!==t?t:null),j(!1)});let{data:{subscription:e}}=f.O.auth.onAuthStateChange((e,t)=>{var r;v(null!==(r=null==t?void 0:t.user)&&void 0!==r?r:null)});return()=>e.unsubscribe()},[]);let N=async()=>{await f.O.auth.signOut(),y.push("/")},k=[{name:"Home",href:"/"},{name:"Movies",href:"/movies"},{name:"TV Shows",href:"/tv"},{name:"Genres",href:"/genres"},{name:"Watchlist",href:"/watchlist",icon:o.Z}],_=b?[{name:"Profile",href:"/profile",icon:l.Z},{name:"Sign Out",href:"#",onClick:N,icon:c.Z}]:[{name:"Sign Up",href:"/signup"},{name:"Login",href:"/login"}],C=e=>{e.preventDefault(),r.trim()&&(y.push("/search?q=".concat(encodeURIComponent(r.trim()))),t(!1))},Z=e=>{"Enter"===e.key&&C(e)};return(0,s.jsx)("nav",{className:"sticky top-0 z-50 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 border-b border-border",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,s.jsxs)(n.default,{href:"/",className:"flex items-center space-x-2",children:[(0,s.jsx)(d.Z,{className:"h-8 w-8 text-accent"}),(0,s.jsxs)("span",{className:"text-xl font-bold text-foreground",children:["Movie ",(0,s.jsx)("span",{className:"text-accent",children:"Inferno"})]})]}),(0,s.jsxs)("div",{className:"hidden md:flex items-center space-x-8",children:[k.map(e=>(0,s.jsxs)(n.default,{href:e.href,className:"text-foreground hover:text-accent transition-colors duration-200 font-medium flex items-center space-x-1",children:[e.icon&&(0,s.jsx)(e.icon,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:e.name})]},e.name)),!w&&_.map(e=>e.onClick?(0,s.jsxs)("button",{onClick:e.onClick,className:"text-foreground hover:text-accent transition-colors duration-200 font-medium flex items-center space-x-1",children:[e.icon&&(0,s.jsx)(e.icon,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:e.name})]},e.name):(0,s.jsxs)(n.default,{href:e.href,className:"text-foreground hover:text-accent transition-colors duration-200 font-medium flex items-center space-x-1",children:[e.icon&&(0,s.jsx)(e.icon,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:e.name})]},e.name))]}),(0,s.jsx)("div",{className:"hidden md:flex items-center space-x-4",children:(0,s.jsxs)("form",{onSubmit:C,className:"relative",children:[(0,s.jsx)(h.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),(0,s.jsx)(p.I,{type:"text",placeholder:"Search movies, TV shows...",value:r,onChange:e=>g(e.target.value),onKeyDown:Z,className:"pl-10 w-64 bg-input border-border focus:border-accent"})]})}),(0,s.jsx)("div",{className:"md:hidden",children:(0,s.jsx)(m.z,{variant:"ghost",size:"sm",onClick:()=>t(!e),children:e?(0,s.jsx)(u.Z,{className:"h-6 w-6"}):(0,s.jsx)(x.Z,{className:"h-6 w-6"})})})]}),e&&(0,s.jsx)("div",{className:"md:hidden",children:(0,s.jsxs)("div",{className:"px-2 pt-2 pb-3 space-y-1 border-t border-border",children:[k.map(e=>(0,s.jsx)(n.default,{href:e.href,className:"block px-3 py-2 text-foreground hover:text-accent transition-colors duration-200",onClick:()=>t(!1),children:(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[e.icon&&(0,s.jsx)(e.icon,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:e.name})]})},e.name)),!w&&_.map(e=>e.onClick?(0,s.jsx)("button",{onClick:()=>{var r;null===(r=e.onClick)||void 0===r||r.call(e),t(!1)},className:"block w-full text-left px-3 py-2 text-foreground hover:text-accent transition-colors duration-200",children:(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[e.icon&&(0,s.jsx)(e.icon,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:e.name})]})},e.name):(0,s.jsx)(n.default,{href:e.href,className:"block px-3 py-2 text-foreground hover:text-accent transition-colors duration-200",onClick:()=>t(!1),children:(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[e.icon&&(0,s.jsx)(e.icon,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:e.name})]})},e.name)),(0,s.jsx)("div",{className:"px-3 py-2",children:(0,s.jsxs)("form",{onSubmit:C,className:"relative",children:[(0,s.jsx)(h.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),(0,s.jsx)(p.I,{type:"text",placeholder:"Search...",value:r,onChange:e=>g(e.target.value),onKeyDown:Z,className:"pl-10 bg-input border-border focus:border-accent"})]})})]})})]})})}},7469:function(e,t,r){"use strict";r.d(t,{z:function(){return l}});var s=r(7821);r(8078);var a=r(7035),i=r(898),n=r(3892);let o=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function l(e){let{className:t,variant:r,size:i,asChild:l=!1,...c}=e,d=l?a.g7:"button";return(0,s.jsx)(d,{"data-slot":"button",className:(0,n.cn)(o({variant:r,size:i,className:t})),...c})}},7002:function(e,t,r){"use strict";r.d(t,{I:function(){return i}});var s=r(7821);r(8078);var a=r(3892);function i(e){let{className:t,type:r,...i}=e;return(0,s.jsx)("input",{type:r,"data-slot":"input",className:(0,a.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...i,suppressHydrationWarning:!0})}},4328:function(e,t,r){"use strict";r.d(t,{B:function(){return i}});var s=r(8078),a=r(725);function i(e){let[t,r]=(0,s.useState)([]),[i,n]=(0,s.useState)(!0),[o,l]=(0,s.useState)(null),c=(0,s.useCallback)(async()=>{if(!e){r([]),n(!1);return}try{n(!0);let t=await fetch("/api/watchlist?user_id=".concat(e));if(!t.ok)throw Error("Failed to fetch watchlist");let s=await t.json();r(s),l(null)}catch(e){l("Failed to load watchlist"),console.error("Error fetching watchlist:",e)}finally{n(!1)}},[e]);(0,s.useEffect)(()=>{if(!e)return;c();let t=a.O.channel("watchlist_changes").on("postgres_changes",{event:"*",schema:"public",table:"watchlist",filter:"user_id=eq.".concat(e)},e=>{console.log("Watchlist change detected:",e),c()}).subscribe();return()=>{t.unsubscribe()}},[e,c]);let d=(0,s.useCallback)((e,r)=>t.some(t=>t.tmdb_id===e&&t.media_type===r),[t]);return{watchlistItems:t,isInWatchlist:d,addToWatchlist:(0,s.useCallback)(async t=>{if(!e)return!1;try{if(!(await fetch("/api/watchlist",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:e,...t})})).ok)throw Error("Failed to add to watchlist");return await c(),!0}catch(e){return console.error("Error adding to watchlist:",e),l("Failed to add to watchlist"),!1}},[e,c]),removeFromWatchlist:(0,s.useCallback)(async(t,r)=>{if(!e)return!1;try{if(!(await fetch("/api/watchlist",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:e,tmdb_id:t,media_type:r})})).ok)throw Error("Failed to remove from watchlist");return await c(),!0}catch(e){return console.error("Error removing from watchlist:",e),l("Failed to remove from watchlist"),!1}},[e,c]),loading:i,error:o}}},725:function(e,t,r){"use strict";r.d(t,{O:function(){return s}});let s=(0,r(1620).eI)("https://ajnkisostsjhoqfyjsqu.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFqbmtpc29zdHNqaG9xZnlqc3F1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYzOTY0MjQsImV4cCI6MjA3MTk3MjQyNH0.KMvKbgeF2xeCwrFSGXHA0NLqZ9_94kIBs0CiSjkuBkg")},3892:function(e,t,r){"use strict";r.d(t,{cn:function(){return i}});var s=r(2605),a=r(1638);function i(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.m6)((0,s.W)(t))}},3778:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(6576).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},432:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(6576).Z)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]])},7746:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(6576).Z)("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]])},9044:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(6576).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},5639:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(6576).Z)("Tv",[["rect",{width:"20",height:"15",x:"2",y:"7",rx:"2",ry:"2",key:"10ag99"}],["polyline",{points:"17 2 12 7 7 2",key:"11pgbg"}]])}},function(e){e.O(0,[875,473,115,364,744],function(){return e(e.s=356)}),_N_E=e.O()}]);