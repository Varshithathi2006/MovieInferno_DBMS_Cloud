(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[233],{5983:function(e,t,s){Promise.resolve().then(s.bind(s,735))},735:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return T}});var r=s(7437),a=s(2265),l=s(9376),n=s(3145),i=s(7648),c=s(2660),o=s(6595),d=s(1047),u=s(1723),x=s(3276),m=s(1178),h=s(3322),f=s(3284),v=s(5288),g=s(2451),b=s(407),j=s(2869),p=s(6070),N=s(5953);function w(e){let{cast:t,className:s=""}=e;return(0,r.jsx)(i.default,{href:"/person/".concat(t.id),children:(0,r.jsx)(p.Zb,{className:"group cursor-pointer transition-all duration-300 hover:scale-105 bg-card border-border ".concat(s),children:(0,r.jsxs)(p.aY,{className:"p-0",children:[(0,r.jsx)("div",{className:"relative aspect-[2/3] overflow-hidden rounded-t-lg",children:(0,r.jsx)(n.default,{src:(0,N.Jn)(t.profile_path)||"/placeholder.svg?height=300&width=200&query=person",alt:t.name,fill:!0,className:"object-cover transition-transform duration-300 group-hover:scale-110",sizes:"(max-width: 768px) 50vw, (max-width: 1200px) 25vw, 20vw"})}),(0,r.jsxs)("div",{className:"p-3",children:[(0,r.jsx)("h4",{className:"font-semibold text-card-foreground text-sm line-clamp-1 group-hover:text-accent transition-colors",children:t.name}),(0,r.jsx)("p",{className:"text-muted-foreground text-xs line-clamp-2 mt-1",children:t.character})]})]})})})}function y(e){let{title:t,cast:s,className:l=""}=e,n=(0,a.useRef)(null),i=e=>{if(n.current){let t=n.current.scrollLeft+("left"===e?-200:200);n.current.scrollTo({left:t,behavior:"smooth"})}};return s.length?(0,r.jsxs)("section",{className:"".concat(l),children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-foreground text-balance",children:t}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(j.z,{variant:"outline",size:"sm",onClick:()=>i("left"),className:"border-border hover:bg-accent hover:text-accent-foreground",children:(0,r.jsx)(g.Z,{className:"w-4 h-4"})}),(0,r.jsx)(j.z,{variant:"outline",size:"sm",onClick:()=>i("right"),className:"border-border hover:bg-accent hover:text-accent-foreground",children:(0,r.jsx)(b.Z,{className:"w-4 h-4"})})]})]}),(0,r.jsx)("div",{ref:n,className:"flex gap-4 overflow-x-auto scrollbar-hide pb-4",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:s.map(e=>(0,r.jsx)(w,{cast:e,className:"flex-none w-48"},e.id))})]}):null}var k=s(7115),S=s(7524),C=s(5974),Z=s(3303);function z(e){let{movieId:t,movieTitle:s,onReviewSuccess:l}=e,[n,i]=(0,a.useState)(0),[c,o]=(0,a.useState)(""),[d,u]=(0,a.useState)(!1),[x,m]=(0,a.useState)(null),[h,f]=(0,a.useState)("");(0,a.useEffect)(()=>{(async()=>{var e;let{data:{session:t}}=await Z.O.auth.getSession();m(null!==(e=null==t?void 0:t.user)&&void 0!==e?e:null)})()},[]);let v=async e=>{if(e.preventDefault(),f(""),!x){f("Please log in to submit a review.");return}if(!n||!c.trim()){f("Please provide a rating and a comment.");return}if(n<1||n>10){f("Rating must be between 1 and 10.");return}u(!0);try{let e=await fetch("/api/reviews",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:x.id,movie_id:t,rating:n,comment:c})}),r=await e.json();if(!e.ok){409===e.status?f("You have already reviewed this movie."):f(r.error||"Failed to submit review.");return}alert('✅ Review for "'.concat(s,'" submitted!')),i(0),o(""),l()}catch(e){console.error("Submission Error:",e),f("❌ Submission failed. Check your network.")}finally{u(!1)}};return x?(0,r.jsxs)("form",{onSubmit:v,className:"p-6 bg-gray-900 rounded-lg space-y-4",children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-white",children:"Post Your Review"}),h&&(0,r.jsx)("div",{className:"p-3 bg-red-900/50 border border-red-700 rounded text-red-200 text-sm",children:h}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("label",{className:"text-sm text-gray-400",children:"Rating (1-10):"}),(0,r.jsx)("input",{type:"number",min:"1",max:"10",value:n,onChange:e=>i(Number(e.target.value)),className:"w-16 p-2 rounded bg-gray-800 border border-gray-700 text-white",disabled:d})]}),(0,r.jsx)("textarea",{placeholder:"Write your review here...",value:c,onChange:e=>o(e.target.value),rows:4,className:"w-full p-3 rounded bg-gray-800 border border-gray-700 text-white resize-none",disabled:d}),(0,r.jsx)(j.z,{type:"submit",disabled:d||!n||!c.trim(),className:"bg-red-600 hover:bg-red-700 disabled:opacity-50",children:d?"Submitting...":"Submit Review"})]}):(0,r.jsxs)("div",{className:"p-6 bg-gray-900 rounded-lg space-y-4",children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-white",children:"Post Your Review"}),(0,r.jsx)("p",{className:"text-gray-400",children:"Please log in to submit a review."}),(0,r.jsx)(j.z,{onClick:()=>window.location.href="/login",className:"bg-red-600 hover:bg-red-700",children:"Log In"})]})}function T(){let e=Number.parseInt((0,l.useParams)().id),[t,s]=(0,a.useState)(null),[g,b]=(0,a.useState)(null),[p,w]=(0,a.useState)([]),[Z,T]=(0,a.useState)(!0),[_,P]=(0,a.useState)(null),[R,W]=(0,a.useState)(!1),[E,M]=(0,a.useState)(!1),L=(0,a.useCallback)(async()=>{try{T(!0);let[t,r,a]=await Promise.all([N.Wu.getDetails(e),N.Wu.getCredits(e),N.Wu.getSimilar(e)]);s(t),b(r),w(a.results),W(!1)}catch(e){console.error("Error fetching movie data:",e),P("Failed to load movie details. Check server logs for API error.")}finally{T(!1)}},[e]);if((0,a.useEffect)(()=>{e&&L()},[e,L]),Z)return(0,r.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,r.jsx)(h.w,{}),(0,r.jsx)("div",{className:"flex items-center justify-center min-h-[60vh]",children:(0,r.jsx)(k.T,{size:"lg"})}),(0,r.jsx)(f.$,{})]});if(_||!t)return(0,r.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,r.jsx)(h.w,{}),(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16 text-center",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-foreground mb-4",children:"Movie not found"}),(0,r.jsx)("p",{className:"text-muted-foreground mb-8",children:_||"The movie you're looking for doesn't exist."}),(0,r.jsx)(j.z,{asChild:!0,children:(0,r.jsxs)(i.default,{href:"/",children:[(0,r.jsx)(c.Z,{className:"w-4 h-4 mr-2"}),"Back to Home"]})})]}),(0,r.jsx)(f.$,{})]});let O=t.release_date?new Date(t.release_date).getFullYear():"TBA",A=t.runtime?"".concat(Math.floor(t.runtime/60),"h ").concat(t.runtime%60,"m"):"N/A",F=t.vote_average?t.vote_average.toFixed(1):"N/A";return(0,r.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,r.jsx)(h.w,{}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)("div",{className:"absolute inset-0",children:[(0,r.jsx)(n.default,{src:(0,N.Jn)(t.backdrop_path,"original")||"/placeholder.svg",alt:t.title||"Movie Backdrop",fill:!0,className:"object-cover",priority:!0}),(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-black/90 via-black/60 to-black/30"}),(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent"})]}),(0,r.jsxs)("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:[(0,r.jsx)(j.z,{variant:"ghost",asChild:!0,className:"mb-8 text-white hover:bg-white/20",children:(0,r.jsxs)(i.default,{href:"/",children:[(0,r.jsx)(c.Z,{className:"w-4 h-4 mr-2"}),"Back to Home"]})}),(0,r.jsxs)("div",{className:"flex flex-col lg:flex-row gap-8",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)(n.default,{src:(0,N.Jn)(t.poster_path)||"/placeholder.svg",alt:t.title||"Movie Poster",width:300,height:450,className:"rounded-lg shadow-2xl",priority:!0})}),(0,r.jsxs)("div",{className:"flex-1 text-white",children:[(0,r.jsx)("h1",{className:"text-4xl md:text-5xl font-bold mb-2",children:t.title}),t.tagline&&(0,r.jsx)("p",{className:"text-xl text-gray-300 italic mb-4",children:t.tagline}),(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-4 mb-6",children:[(0,r.jsxs)(C.C,{variant:"secondary",className:"bg-accent/20 text-accent border-accent/30",children:[(0,r.jsx)(o.Z,{className:"w-3 h-3 mr-1 fill-accent"}),F]}),(0,r.jsxs)(C.C,{variant:"outline",className:"border-white/30 text-white",children:[(0,r.jsx)(d.Z,{className:"w-3 h-3 mr-1"}),O]}),(0,r.jsxs)(C.C,{variant:"outline",className:"border-white/30 text-white",children:[(0,r.jsx)(u.Z,{className:"w-3 h-3 mr-1"}),A]})]}),t.genres&&t.genres.length>0&&(0,r.jsx)("div",{className:"flex flex-wrap gap-2 mb-6",children:t.genres.map(e=>(0,r.jsx)(C.C,{variant:"outline",className:"border-white/30 text-white",children:e.name},e.id))}),t.overview&&(0,r.jsx)("p",{className:"text-lg text-gray-200 mb-8 leading-relaxed",children:t.overview}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,r.jsxs)(j.z,{size:"lg",className:"bg-accent hover:bg-accent/90 text-accent-foreground",onClick:()=>M(!0),children:[(0,r.jsx)(x.Z,{className:"w-5 h-5 mr-2"}),"Watch Trailer"]}),(0,r.jsxs)(j.z,{variant:"outline",size:"lg",className:"border-white/30 text-white hover:bg-white/10 bg-transparent",children:[(0,r.jsx)(m.Z,{className:"w-5 h-5 mr-2"}),"Add to Watchlist"]})]})]})]})]})]}),(0,r.jsx)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:(0,r.jsxs)("div",{className:"space-y-16",children:[g&&g.cast.length>0&&(0,r.jsx)(y,{title:"Cast",cast:g.cast.slice(0,20)}),(0,r.jsxs)("section",{id:"review-form-section",children:[(0,r.jsx)("h2",{className:"text-3xl font-bold text-foreground mb-6",children:"Write a Review"}),(0,r.jsx)(z,{movieId:t.id,movieTitle:t.title||"This Movie",onReviewSuccess:()=>{L()}})]}),p.length>0&&(0,r.jsx)(v.s,{title:"Similar Movies",movies:p})]})}),(0,r.jsx)(f.$,{}),(0,r.jsx)(S._,{contentId:null==t?void 0:t.id,contentTitle:(null==t?void 0:t.title)||"",contentType:"movie",isOpen:E,onClose:()=>M(!1)})]})}},7115:function(e,t,s){"use strict";s.d(t,{T:function(){return l}});var r=s(7437);let a=(0,s(9205).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);function l(e){let{className:t="",size:s="md"}=e;return(0,r.jsx)("div",{className:"flex items-center justify-center ".concat(t),children:(0,r.jsx)(a,{className:"animate-spin text-accent ".concat({sm:"w-4 h-4",md:"w-8 h-8",lg:"w-12 h-12"}[s])})})}},5288:function(e,t,s){"use strict";s.d(t,{s:function(){return o}});var r=s(7437),a=s(2265),l=s(2451),n=s(407),i=s(2869),c=s(7531);function o(e){let{title:t,movies:s,className:o=""}=e,d=(0,a.useRef)(null),u=e=>{if(d.current){let t=d.current.scrollLeft+("left"===e?-320:320);d.current.scrollTo({left:t,behavior:"smooth"})}};return s.length?(0,r.jsxs)("section",{className:"".concat(o),children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-foreground text-balance",children:t}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(i.z,{variant:"outline",size:"sm",onClick:()=>u("left"),className:"border-border hover:bg-accent hover:text-accent-foreground",children:(0,r.jsx)(l.Z,{className:"w-4 h-4"})}),(0,r.jsx)(i.z,{variant:"outline",size:"sm",onClick:()=>u("right"),className:"border-border hover:bg-accent hover:text-accent-foreground",children:(0,r.jsx)(n.Z,{className:"w-4 h-4"})})]})]}),(0,r.jsx)("div",{ref:d,className:"flex gap-4 overflow-x-auto scrollbar-hide pb-4",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:s.map(e=>(0,r.jsx)(c.u,{movie:e,className:"flex-none w-72"},e.id))})]}):null}},7524:function(e,t,s){"use strict";s.d(t,{_:function(){return c}});var r=s(7437),a=s(2265),l=s(2489),n=s(2869),i=s(5953);function c(e){let t,{contentId:s,contentTitle:c,contentType:o,isOpen:d,onClose:u}=e,[x,m]=(0,a.useState)([]),[h,f]=(0,a.useState)(!1),[v,g]=(0,a.useState)(null);(0,a.useEffect)(()=>{d&&s&&b()},[d,s,o]);let b=async()=>{try{f(!0),g(null);let e=("movie"===o?await i.Wu.getVideos(s):await i.ss.getVideos(s)).results.filter(e=>"YouTube"===e.site&&("Trailer"===e.type||"Teaser"===e.type)&&e.official);m(e)}catch(e){console.error("Error fetching videos:",e),g("Failed to load trailer")}finally{f(!1)}};return d?(0,r.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm",children:(0,r.jsxs)("div",{className:"relative w-full max-w-4xl mx-4 bg-background rounded-lg overflow-hidden",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 border-b",children:[(0,r.jsxs)("h2",{className:"text-xl font-semibold",children:[c," - Trailer"]}),(0,r.jsx)(n.z,{variant:"ghost",size:"sm",onClick:u,className:"h-8 w-8 p-0",children:(0,r.jsx)(l.Z,{className:"h-4 w-4"})})]}),(0,r.jsxs)("div",{className:"p-4",children:[h&&(0,r.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}),v&&(0,r.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,r.jsx)("p",{className:"text-muted-foreground",children:v})}),!h&&!v&&0===x.length&&(0,r.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,r.jsx)("p",{className:"text-muted-foreground",children:"No trailers available"})}),!h&&!v&&x.length>0&&(0,r.jsx)("div",{className:"space-y-4",children:(0,r.jsx)("div",{className:"aspect-video",children:(0,r.jsx)("iframe",{src:(t=x[0].key,"https://www.youtube.com/embed/".concat(t,"?autoplay=1&rel=0&modestbranding=1")),title:x[0].name,className:"w-full h-full rounded-lg",allowFullScreen:!0,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"})})})]})]})}):null}},5974:function(e,t,s){"use strict";s.d(t,{C:function(){return i}});var r=s(7437),a=s(535),l=s(4508);let n=(0,a.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:t,variant:s,...a}=e;return(0,r.jsx)("div",{className:(0,l.cn)(n({variant:s}),t),...a})}},2660:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9205).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},2451:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9205).Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},407:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9205).Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},1723:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9205).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},3276:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9205).Z)("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]])},6595:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9205).Z)("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]])}},function(e){e.O(0,[63,866,145,407,0,971,117,744],function(){return e(e.s=5983)}),_N_E=e.O()}]);